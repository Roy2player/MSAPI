# MSAPI

MSAPI is a modular, high-performance C++ library for building Linux-based microservice and macrosystem architectures. It provides internal protocols, utilities, and server logic for efficient, scalable system development.

- ‚úÖ Has no dependencies on third-party libraries.
- ‚úÖ Is thoroughly documented.
- ‚úÖ Is well covered by unit and end-to-end tests.

## üîß Building

To build library follow next simple steps:
```
cd library/build
cmake -DCMAKE_BUILD_TYPE=Release .
cmake --build . -j $(nproc)
```

- ***Build system:*** CMake 3.2+
- ***Compiler:*** C++20 compatible (GCC/Clang)
- ***Runtime:*** Linux (POSIX threads, Linux sockets)
- Pure C++ standard library

***BUILD_PROFILE*** variable can be set to choose build type: Debug or Release.
See [CMakeListsCommonOptions.txt](library/build/CMakeListsCommonOptions.txt) for more details.

Number of bash scripts are available in the [bash/](bash/) folder to simplify building process. ***MSAPI_PATH*** variable should be set to the root of the MSAPI repository.

## üß© Features & structure:

### [Server Framework](library/source/server/)
- [**Server:**](library/source/server/server.h) Provides communication ability via TCP sockets and current-state model to manage server lifetime;
- [**Application:**](library/source/server/application.h) Provides customization ability via parameters and current-state model to manage application behavior.

Server provides data to be handled by calling a callback in case if this data is not a part of internal Application protocol.

### [Custom and another protocols](library/source/protocol/)
- [**Object protocol:**](library/source/protocol/object.h) Transfers simple copyable objects using stream and filter models.
- [**Standard protocol:**](library/source/protocol/standard.h) Handles dynamic-size messages as arrays of key-value pairs.
- [**HTTP protocol:**](library/source/protocol/http.h) Basic HTTP message parsing and handling.

### [Utility Modules](library/source/help/)
- [**Log:**](library/source/help/log.h) Multiple log levels and console/file outputs.
- [**Time:**](library/source/help/time.h) Time utilities and event scheduling.
- [**HTML:**](library/source/help/html.h) Parser module.
- [**JSON:**](library/source/help/json.h) Parser and producer module.
- [**Table:**](library/source/help/table.h) Data structure.
- [**Pthread:**](library/source/help/pthread.hpp) Module to synchronize threads.
- [**IO:**](library/source/help/io.inl) Filesystem I/O utilities.
- [**Helper:**](library/source/help/helper.h) Miscellaneous utilities for common tasks.
- [**Meta:**](library/source/help/meta.hpp) Static enum translation, type helpers, and compile-time utilities.
- [**SHA256:**](library/source/help/sha256.inl) SHA-256 hashing implementation.

### [Testing Framework](library/source/test/)

Unit/end-to-end tests utilities with ability to run servers as daemons.

## üñ•Ô∏è Frontend

[Manager app](apps/manager/source/manager.h) for orchestrating custom apps on the same host, with a user-friendly web interface.

Provides a robust and user-friendly interface for managing applications built on the framework.

- ***Web Interface:*** Manage applications through an intuitive, web-based UI.
- ***Installed Application Management:*** Automatically detect, register, and manage applications from a configuration file.
- ***Application Lifecycle Management:*** Create, modify, delete, run, pause, and monitor applications seamlessly.
- ***Dynamic Metadata Handling:*** Metadata is automatically generated by the C++ library and dynamically managed, ensuring the frontend loads only the relevant data when needed.
- ***Customizable Parameters:*** Modify application parameters with built-in validation and error handling.
- ***Real-Time Updates:*** Monitor application states and parameters in real time.
- ***Window Snapping:*** Drag and resize views with automatic snapping to other views or window borders.
- ***Logging Configuration:*** Customize logging options, including log levels, console/file output, and log file rotation by day.
- ***Error Handling:*** Provides mechanisms to handle invalid operations or configurations, ensuring robustness and reliability.
- ***Full Customization:*** Define each view using unique HTML templates on top of standardized structures, further customizable with CSS and extendable via JavaScript.

MSAPI frontend provides a modular set of views for managing, configuring, and interacting with MSAPI applications and their parameters through a unified web interface.

![Short preview](./apps/manager/web/images/MSAPI_Manager_preview.gif)

### JS Core

- [**View:**](apps/manager/web/js/view.js) Abstraction for UI views, supporting creation, movement, resizing, snapping, maximizing, hiding, closing, and error handling.
- [**Table:**](apps/manager/web/js/table.js) Dynamic table creation and management, supporting mutable and immutable tables, validation, and custom column types.
- [**Grid:**](apps/manager/web/js/grid.js) Flexible grid component for displaying and managing tabular data with sorting, filtering, and column/row operations.
- [**Timer:**](apps/manager/web/js/timer.js) Timestamp input handling, normalization, and validation with timezone support.
- [**Duration:**](apps/manager/web/js/duration.js) Duration input parsing, normalization, and validation for multiple time units.
- [**Select:**](apps/manager/web/js/select.js) Custom select input with searchable options, validation, and dynamic metadata integration.
- [**Helper:**](apps/manager/web/js/helper.js) Utility functions for type limits, validation, formatting, deep equality, and more.

### Default views

- [**InstalledApps:**](apps/manager/web/js/views/installedApps.js) Displays a grid of installed MSAPI applications.
- [**CreatedApps:**](apps/manager/web/js/views/createdApps.js) Shows a grid of created/running apps with parameters and action buttons.
- [**NewApp:**](apps/manager/web/js/views/newApp.js) Presents a form for creating new applications.
- [**ModifyApp:**](apps/manager/web/js/views/modifyApp.js) Allows modification of application parameters.
- [**AppView:**](apps/manager/web/js/views/appView.js) Embeds the application‚Äôs custom UI in an iframe.
- [**TableView:**](apps/manager/web/js/views/tableView.js) Displays a read-only MSAPI table for a given parameter.
- [**SelectView:**](apps/manager/web/js/views/selectView.js) Provides a searchable, case-sensitive select dialog for choosing parameter values.
- [**GridSettingsView:**](apps/manager/web/js/views/gridSettingsView.js) Offers a settings panel for grid columns, including alignment, sorting, and filtering options.

## ‚öñÔ∏è License

This software is licensed under the **Polyform Noncommercial License 1.0.0**, see [LICENSE.md](LICENSE.md).  
You may use, copy, modify, and distribute it for noncommercial purposes only.

For commercial use, please contact: maks.angels@mail.ru

## ü§ù Contributing

Contributions are welcome!  
By contributing to this repository, you agree to the [Contributor License Agreement](CONTRIBUTING.md).